---
title: 【位置追踪】更新日志
layout: Post
author: Sallee_admin
---

> 位置追踪测试群：870585305
> 不定期发布测试版本，新功能和bug修复会第一时间发布出来测试

::: timeline Beta-6.0.7

* 修复6.0.6的特征点归一化导致的悠悠度假村和安饶之野左下角无名岛无法追踪的问题
* 修复伊黎耶岛东侧水道，遗忘之路等图层无法追踪的问题
* 【实验性】使用avif代替J2000，理论上会有比J2000和webp更优秀的压缩率和解码速度，但因为静态链接av1解码器的原因导致追踪模块大小降低并不明显

:::



::: timeline Beta-6.0.6

* 修复回声之子，圣火竞技场无法追踪
* 修复璃月南部，流泉之众坐标错误
* 修复一个因缩放参数设置过于严格，导致部分地区返回了正确的坐标却被后处理否决的问题
* 修复在极小概率下，坐标返回NaN导致追踪崩溃的问题
* 修复了一个遗留代码导致的bug，这个bug会导致局部匹配时的初坐标和实际坐标相差较远，在部分地区（如梅洛彼得堡）会导致匹配失败
* 生成特征点缓存进行了分块处理，可防止因为内存不足导致特征点缓存生成失败
* 修复了SURF匹配算法的特征点硬上限为290000的问题，防止因为地图扩张导致特征点变稀疏
* 特征点现在被归一化同一个坐标系下，彻底解决因为坐标离开映射边界导致的瞬移问题，并且可以同时匹配多个图层，稳定性更好
  * > 误匹配造成的瞬移目前暂时无法解决
* 为配合上述归一化坐标系，特征点会进行LSH索引，以在局部匹配中快速抽取特征点，缓存文件结构略有变化
* 小地图特征点进行了后处理，剔除在小地图范围外的假特征点，提高坐标推算的稳定性。
* 【实验性】使用jpeg2000代替webp存储底图，底图细节保留更好，提高全局匹配的命中率，预计会使追踪模块增大25MB左右

:::


::: timeline Beta-6.0.5

* 修复绝海之下漂移
* 修复雷图礁·隧路无法追踪

:::

::: timeline Beta-6.0.4

* 修复终夜长茔无法追踪
* 修复月矩力实验设计局·地下研究所追踪漂移
* 修复悠悠集市/呼呼丘追踪漂移

:::

::: timeline Beta-6.0.3

* 修复挪德卡莱大部分地区无法追踪
* 修复叮呤哐啷蛋卷工坊，霜月之坊无法追踪
* 重新配准了渊下宫，地下层岩的坐标系，修复这两个地区的轻微漂移

:::

::: timeline Beta-6.0.1

* 适配挪徳卡莱新版本追踪

:::

<!-- more -->

::: timeline Beta-5.8.2

* 修复悠悠度假村地表追踪坐标向右下角漂移的问题
* 修复悠悠集市和呼呼丘无法追踪的问题
* 修复纳塔硫晶支脉无法追踪的问题
* 使用更严格的坐标约束，增加追踪的稳定性
* 局部匹配不再尝试使用旧算法——旧算法虽然能在弱纹理中追踪，但也容易造成误匹配，以及陷入局部最优的问题

:::

::: timeline Beta-5.8.1

* 支持新地图——悠悠度假村的追踪

:::

::: timeline Beta-5.6.4

* 修复bitblt算法运行崩溃的问题
* 回退AKAZE算法更改，算法理论上和5.2以及更早版本相同
* 局部匹配添加距离约束抑制瞬移问题

:::


::: timeline Beta-5.6.3

* 恢复Bitblt算法
* 使用AKAZE代替SURF算法
* 通过对仿射矩阵的校验解决部分瞬移问题
* 修复关闭客户端后重新打开，追踪失效的问题

:::

::: timeline Beta-5.6.2

* 修复小地图定位算法重构后，追踪时崩溃
* 修复当画面压暗时，小地图无法定位的问题

:::

::: timeline Beta-5.6.1

* 为 5.6 沃陆之邦西侧小岛添加坐标映射
* 移除 Bitblt 的支持，它太老了
* 修复WGC截图在最小化的情况下不能截图的问题
* 重构代码，删除已废弃的结构体和相关功能
* 重写句柄识别算法，目前应该能正常识别到国际服的原神
* 重写小地图定位算法，新的算法能抵抗更多的滤镜变化

:::

::: timeline Beta-5.5.10

* 修复旧日之海坐标漂移问题

:::

::: timeline Beta-5.5.1

* 适配远古圣山地图
* 重构特征点匹配，使用单应矩阵解算代替原本的均值求解
* 日志添加 CPU 指令集输出项，用于排查可能因为指令不兼容导致的崩溃
* 添加动态加载依赖项功能（目前未实装）

:::

::: timeline Beta-5.2.2

* 适配原神 5.2 纳塔底图

:::

::: timeline Beta-5.0.42

* 修复若干纳塔部落地下区域和硫晶支脉地表分层不能追踪的问题

:::

::: timeline Beta-5.0.40

* 适配原神 5.0 纳塔底图

:::

::: timeline GIv4.8 希穆兰卡分支

* 适配希穆兰卡地图
* 移除特征点匹配的死代码
* 重构资源读取流程

:::

::: timeline 7.15.1

* 修复长时间在 Bitblt 截图模式下，内存泄漏的问题

:::

::: timeline 7.14.2

* 使用 WGC 截图代替 DXGI 截图，降低崩溃概率
* 支持“云原神”追踪

:::

::: timeline 7.13.1

* 适配旧日之海

:::

::: timeline 7.12.2

* 修复层岩巨渊，渊下宫坐标偏差

:::

::: timeline 7.12.1

* 适配沉玉谷

:::

::: timeline 7.11.1

* 适配枫丹 3

:::

::: timeline 7.10.2

* 修正了地下的坐标映射，现在地下坐标会更准确一些
* 如果没有获取到坐标，将不会在枫丹左上角显示箭头
* 降低了在地下区域，箭头瞬移到地图外的概率
* 修复了歌剧院坐标漂移
* 修复须弥城无法追踪

:::

::: timeline 7.10.0

* 适配枫丹 2
* 适配地下地图，暂时不支持检测层级
* 调整坐标系，稍微提高了精度
* 修复望舒客栈无法追踪

:::

::: timeline 7.9.36

* 继续修复 DXGI 截图崩溃问题

:::

::: timeline 7.9.35

* 修复 DXGI 截图崩溃问题

:::

::: timeline 7.9.33

* 支持枫丹的水下区域追踪

:::

::: timeline 7.9.32

* 支持枫丹已解锁地区追踪
* 通过坐标映射的方式优化主城内的识别

:::

::: timeline GIv38 琉形蜃境分支

* 适配 3.8 活动地图
* 大幅减小了包体体积
* 修复了位置追踪缓存无法正常更新的问题

:::

::: timeline 7.9.5

* 修复传送后箭头漂移

:::

::: timeline 7.9.1

* 改进视角识别算法
* 提高识别稳定性
* 修复若干 DXGI 的报错

:::

::: timeline 7.8.55

* 优化定位缓存文件的大小

:::
